<!doctype html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Excellence Abidjan</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <div id="app" class="app">
    <header class="topbar">
      <div class="brand">Excellence Abidjan</div>
      <div class="controls">
        <select id="lang" title="Language">
          <option value="fr">FR</option>
          <option value="en">EN</option>
          <option value="ar">AR</option>
        </select>
      </div>
    </header>

    <nav class="tabs" role="navigation">
      <button class="tab active" data-target="tab-products">Produits</button>
      <button class="tab" data-target="tab-add">Ajouter</button>
      <button class="tab" data-target="tab-stock">Stock & Ventes</button>
      <button class="tab" data-target="tab-clients">Clients</button>
      <button class="tab" data-target="tab-export">Export</button>
    </nav>

    <main class="content">

      <!-- PRODUCTS -->
      <section id="tab-products" class="panel active">
        <div class="toolbar">
          <input id="search" placeholder="Rechercher nom/fournisseur/catégorie..." />
          <select id="catFilter"><option value="">Toutes catégories</option></select>
          <button id="newProductBtn">+ Nouveau</button>
        </div>

        <div id="productGrid" class="grid"></div>

        <div class="summary">
          <div>Total produits: <span id="statCount">0</span></div>
          <div>Valeur stock: <span id="statValue">0 CFA</span></div>
          <div>Top ventes: <span id="statTop">-</span></div>
        </div>
      </section>

      <!-- ADD -->
      <section id="tab-add" class="panel">
        <form id="productForm" class="card form">
          <h3>Ajouter / Éditer produit</h3>
          <input id="p_name" placeholder="Nom" required />
          <input id="p_category" placeholder="Catégorie" />
          <input id="p_supplier" placeholder="Fournisseur" />
          <div class="row">
            <input id="p_price" type="number" placeholder="Prix vente (CFA)" required />
            <input id="p_cost"  type="number" placeholder="Prix revient (CFA)" required />
          </div>
          <div class="row">
            <input id="p_stock" type="number" placeholder="Stock initial" required />
            <input id="p_discount" type="number" placeholder="Ristourne (%)" />
          </div>
          <label class="file">
            <input id="p_image" type="file" accept="image/*" capture="environment" />
            <span>Choisir image / caméra</span>
          </label>
          <div class="form-actions">
            <button id="saveProduct" type="submit">Enregistrer</button>
            <button id="cancelEdit" type="button" class="ghost">Annuler</button>
          </div>
        </form>
      </section>

      <!-- STOCK & SALES -->
      <section id="tab-stock" class="panel">
        <div class="card">
          <h3>Tableau de bord</h3>
          <div class="dash">
            <div>Total ventes: <b id="dashSales">0 CFA</b></div>
            <div>Valeur stock: <b id="dashStock">0 CFA</b></div>
            <div>Alertes stock: <b id="dashLow">-</b></div>
          </div>
        </div>

        <div class="card form">
          <h3>Mouvement (Entrée / Vente)</h3>
          <div class="row">
            <select id="moveProduct"></select>
            <input id="moveQty" type="number" placeholder="Quantité" />
          </div>
          <div class="row">
            <select id="moveType"><option>Entrée</option><option>Vente</option></select>
            <input id="movePrice" type="number" placeholder="Prix (optionnel)" />
          </div>
          <div class="row">
            <input id="moveClient" placeholder="Client (optional)" />
            <label class="checkbox"><input id="moveCredit" type="checkbox"> Vente à crédit</label>
          </div>
          <div class="form-actions">
            <button id="applyMove">Enregistrer</button>
            <button id="doSell" class="danger">Vendre</button>
          </div>
        </div>

        <div class="card">
          <h3>Ventes / Entrées par date</h3>
          <div class="toolbar">
            <input id="reportDate" type="date" />
            <button id="applyFilter">Afficher</button>
            <button id="printReport">Imprimer</button>
            <button id="shareWA">Partager WhatsApp</button>
          </div>
          <div class="table-wrap">
            <table id="logTable">
              <thead><tr><th>Date</th><th>Produit</th><th>Type</th><th>Qty</th><th>Prix</th><th>Total</th><th>Client</th></tr></thead>
              <tbody></tbody>
            </table>
          </div>
          <div class="report-sum">Total: <b id="reportSum">0 CFA</b></div>
        </div>
      </section>

      <!-- CLIENTS -->
      <section id="tab-clients" class="panel">
        <div class="card">
          <h3>Clients & Crédits</h3>
          <form id="clientForm" class="row">
            <input id="c_name" placeholder="Nom client" />
            <input id="c_phone" placeholder="Téléphone" />
            <button id="addClient" type="button">Ajouter</button>
          </form>
          <div class="table-wrap">
            <table id="clientsTable">
              <thead><tr><th>Client</th><th>Dette</th><th>Actions</th></tr></thead>
              <tbody></tbody>
            </table>
          </div>
        </div>
      </section>

      <!-- EXPORT -->
      <section id="tab-export" class="panel">
        <div class="card form">
          <h3>Export / Import</h3>
          <div class="row">
            <button id="exportCSV">Exporter CSV</button>
            <button id="exportXLSX">Exporter Excel</button>
            <input id="importFile" type="file" accept=".csv,.xlsx" />
          </div>
          <div class="note">CSV format produits: name,category,supplier,price,cost,stock,discount</div>
        </div>
      </section>

    </main>

    <button id="fab" class="fab">+</button>
  </div>

  <!-- SheetJS for Excel export -->
  <script src="https://cdn.sheetjs.com/xlsx-latest/package/dist/xlsx.full.min.js"></script>
  <script src="script.js"></script>
</body>
</html>
